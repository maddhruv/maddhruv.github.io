<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><meta name="next-head-count" content="2"/><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"/><link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"/><link rel="manifest" href="/manifest.json"/><link rel="preconnect" href="https://fonts.googleapis.com"/><link rel="preconnect" href="https://fonts.gstatic.com"/><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin /><link rel="preload" href="/_next/static/css/aa3f7ec7d85f2442.css" as="style"/><link rel="stylesheet" href="/_next/static/css/aa3f7ec7d85f2442.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-d7b038a63b619762.js" defer=""></script><script src="/_next/static/chunks/framework-7dc8a65f4a0cda33.js" defer=""></script><script src="/_next/static/chunks/main-7ca0c04a95757ac7.js" defer=""></script><script src="/_next/static/chunks/pages/_app-8dc7680e87c03048.js" defer=""></script><script src="/_next/static/chunks/664-fe1f0ac1dd157bd4.js" defer=""></script><script src="/_next/static/chunks/500-2f12a9d3a5e589e1.js" defer=""></script><script src="/_next/static/chunks/pages/blog/%5Btitle%5D-05d98237e33d10b4.js" defer=""></script><script src="/_next/static/y3IXVlY01SDjNNYdaeJwk/_buildManifest.js" defer=""></script><script src="/_next/static/y3IXVlY01SDjNNYdaeJwk/_ssgManifest.js" defer=""></script><style data-href="https://fonts.googleapis.com/css2?family=Roboto&display=swap">@font-face{font-family:'Roboto';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOmCnqEu92Fr1Me5g.woff) format('woff')}@font-face{font-family:'Roboto';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOmCnqEu92Fr1Mu72xKKTU1Kvnz.woff2) format('woff2');unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:'Roboto';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOmCnqEu92Fr1Mu5mxKKTU1Kvnz.woff2) format('woff2');unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:'Roboto';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOmCnqEu92Fr1Mu7mxKKTU1Kvnz.woff2) format('woff2');unicode-range:U+1F00-1FFF}@font-face{font-family:'Roboto';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOmCnqEu92Fr1Mu4WxKKTU1Kvnz.woff2) format('woff2');unicode-range:U+0370-03FF}@font-face{font-family:'Roboto';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOmCnqEu92Fr1Mu7WxKKTU1Kvnz.woff2) format('woff2');unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+1EA0-1EF9,U+20AB}@font-face{font-family:'Roboto';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOmCnqEu92Fr1Mu7GxKKTU1Kvnz.woff2) format('woff2');unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Roboto';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOmCnqEu92Fr1Mu4mxKKTU1Kg.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}</style></head><body class="bg-white-regular dark:bg-black-light"><div id="__next"><div class="ðŸ«"><h2 class="ðŸ¦‹">Dhruv Jain</h2><div class="ðŸ“”"><header><div class="ðŸ·"><span><span class="JavaScript">JavaScript</span></span><span><span>, </span><span class="Testing">Testing</span></span></div><h1>Storybook Loki Integration</h1></header><main><main class="notion dark-mode notion-page notion-block-8c37e8871d084b35ac722c97a034bc78 ðŸ“Ÿ"><div class="notion-viewport"></div><hr class="notion-hr notion-block-4e247a7d5f3b4b588485bf8c0526c065"/><div class="notion-blank notion-block-6e254eb2efaf439d91d82ffb33e57f96">Â </div><div class="notion-text notion-block-cfd6ad94419248c080ef9648b3cb61d7"><a target="_blank" rel="noopener noreferrer" class="notion-link" href="https://loki.js.org/">Loki</a> is an easy-to-use visual regression tool for your storybook app that uses real browsers in docker environments and has multiple <a target="_blank" rel="noopener noreferrer" class="notion-link" href="https://loki.js.org/configuration.html#diffingengine">diffing engines</a> to enable image comparisons.</div><div class="notion-text notion-block-290fd78a5a104fc8914ada158364ee49">In this guide, we will walk through the integration of Loki with the storybook to enable visual regression for your stories. This guide doesn&#x27;t cover any arguments on why and where to use visual regression testings. This guide covers:</div><ul class="notion-list notion-list-disc notion-block-16831021451b4d05b78711949a7c370e"><li>setting up Loki</li></ul><ul class="notion-list notion-list-disc notion-block-4d23e7370e31492ea4fece8d6c12d2fd"><li>skipping stories</li></ul><ul class="notion-list notion-list-disc notion-block-103cc851a9fd498baea00e70d09c924e"><li>enable Loki testing on GitHub Actions (CI)</li></ul><ul class="notion-list notion-list-disc notion-block-e045512183824f9887231627d140dbc4"><li>some tips to follow</li></ul><div class="notion-text notion-block-f22dace2f98d4a25912e9be41ebc956f">Throughout this guide, we will be using this repository <a target="_blank" rel="noopener noreferrer" class="notion-link" href="https://github.com/maddhruv/storybook-loki-integration">maddhruv/storybook-loki-integration</a> as a reference to the integration.</div><div class="notion-text notion-block-2cb3ab2c1430478f92854ebbbaae1439">Let&#x27;s get started.</div><h3 class="notion-h notion-h2 notion-h-indent-0 notion-block-e27f74f362fe4e4499f3680f3b3a29fe" data-id="e27f74f362fe4e4499f3680f3b3a29fe"><span><div id="e27f74f362fe4e4499f3680f3b3a29fe" class="notion-header-anchor"></div><a class="notion-hash-link" href="#e27f74f362fe4e4499f3680f3b3a29fe" title="Prerequisites"><svg viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><span class="notion-h-title">Prerequisites</span></span></h3><ul class="notion-list notion-list-disc notion-block-a7d3b5e59841459f9a4c119bf3ddfe05"><li>Docker (for certain targets)</li></ul><h3 class="notion-h notion-h2 notion-h-indent-0 notion-block-47915351c8e241878edc6ea08a7b289d" data-id="47915351c8e241878edc6ea08a7b289d"><span><div id="47915351c8e241878edc6ea08a7b289d" class="notion-header-anchor"></div><a class="notion-hash-link" href="#47915351c8e241878edc6ea08a7b289d" title="Install Loki"><svg viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><span class="notion-h-title">Install Loki</span></span></h3><div class="notion-text notion-block-6542fc7dcc1f4d458e74a645d99c8d3f">It is preassumed that your app has storybook integrated and working. Install loki as a dev dependency to your node app.</div><div class="notion-text notion-block-987d5853cbe54cb294c316e93e2a7261"><code class="notion-inline-code">npm i loki -D</code> or <code class="notion-inline-code">yarn add loki -D</code></div><div class="notion-text notion-block-e6ac1412b44b4bc08d7bc10d6343bce6">And that&#x27;s it, installation is as easy as that.</div><h3 class="notion-h notion-h2 notion-h-indent-0 notion-block-31173e533e7e4c42852912cd6f8acedc" data-id="31173e533e7e4c42852912cd6f8acedc"><span><div id="31173e533e7e4c42852912cd6f8acedc" class="notion-header-anchor"></div><a class="notion-hash-link" href="#31173e533e7e4c42852912cd6f8acedc" title="Setup Loki"><svg viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><span class="notion-h-title">Setup Loki</span></span></h3><div class="notion-text notion-block-4eadcb0c3f334b66b73ad513922feda7">Loki comes with an in-built command to initialize the loki <a target="_blank" rel="noopener noreferrer" class="notion-link" href="https://loki.js.org/configuration.html">configuration</a> which is <code class="notion-inline-code">loki init</code> but I will not recommend you to use that, as it adds the configuration to the <em>package.json</em> by default and sometimes the overrides are not what you would want.</div><div class="notion-text notion-block-22b39b868f324a55a3b7c9112932f222">But what is the issue in adding the config to the <em>package.json</em>, no there is not unless your want to write custom formatter and enable the testing on CI. Don&#x27;t worry, we will get to it in a moment.</div><div class="notion-text notion-block-bc24b170f3b9477d941d35677e9c0f72">For now, let&#x27;s create a file called <code class="notion-inline-code">loki.config.js</code> and add the following configuration to it.</div><div class="notion-text notion-block-346fcaacee2641298dbf82101a1a6f12">It just enables the testing on two targets - chrome on docker as desktop and chrome on iPhone7. You can configure your targets or devices using the <code class="notion-inline-code">target</code> options here - <a target="_blank" rel="noopener noreferrer" class="notion-link" href="https://loki.js.org/configuration.html#configurations">#configurations</a>. The testing time is linearly proportional to the number of targets.</div><h3 class="notion-h notion-h2 notion-h-indent-0 notion-block-f2d6fabfa3ce425ba369e3823039bd4c" data-id="f2d6fabfa3ce425ba369e3823039bd4c"><span><div id="f2d6fabfa3ce425ba369e3823039bd4c" class="notion-header-anchor"></div><a class="notion-hash-link" href="#f2d6fabfa3ce425ba369e3823039bd4c" title="Run Loki"><svg viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><span class="notion-h-title">Run Loki</span></span></h3><div class="notion-text notion-block-eb81b399f894490ca8f71f28055ffdf4">It&#x27;s time to run loki and add snapshots. For the first time, you would need to run <code class="notion-inline-code">loki update</code> to add all the possible snapshots/screenshots. This will create a <code class="notion-inline-code">.loki</code> directory and save all the snapshots there.</div><div class="notion-text notion-block-11190ad9255e4b449cf69713749724a0"><code class="notion-inline-code">loki update</code></div><div class="notion-text notion-block-67183c104b9647e18d9520540762918c"><code class="notion-inline-code">update</code> by default runs on the <code class="notion-inline-code">6006</code> port. You may need to pass the storybook app port to the command above, use the options <code class="notion-inline-code">--port</code> for that, and run your storybook app before running loki.</div><div class="notion-text notion-block-b4f7b5c855d9489c88424caa13fe8efa"><code class="notion-inline-code">loki update --port 1337</code></div><blockquote class="notion-quote notion-block-605a8a0e6c814f65b0a36f337c1fcc76">Loki update will fetch the required docker images for you and then update the snapshots</blockquote><figure class="notion-asset-wrapper notion-asset-wrapper-image notion-block-a0618eae40e94d4d8e0cc2a8db7df211"><div style="position:relative;display:flex;justify-content:center;align-self:center;width:100%;max-width:100%;flex-direction:column"><img src="https://www.notion.so/image/.%2Floki-update.png?table=block&amp;id=a0618eae-40e9-4d4d-8e0c-c2a8db7df211&amp;cache=v2" alt="notion image" loading="lazy" decoding="async"/></div></figure><div class="notion-text notion-block-6753ae78258c4782906f9c76e2673562">All the generated screenshots are available under <code class="notion-inline-code">.loki/reference</code> directory.</div><h3 class="notion-h notion-h2 notion-h-indent-0 notion-block-39fd13fdef6b4716aad5c4e08aca96b3" data-id="39fd13fdef6b4716aad5c4e08aca96b3"><span><div id="39fd13fdef6b4716aad5c4e08aca96b3" class="notion-header-anchor"></div><a class="notion-hash-link" href="#39fd13fdef6b4716aad5c4e08aca96b3" title="Run Test"><svg viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><span class="notion-h-title">Run Test</span></span></h3><div class="notion-text notion-block-1128ac76453442b9b53391d9a7d4f6c9">After when you have generated the snapshots. It is time to run the actual tests if anything has changed visually. Just make any changes to your components/stories and then run.</div><div class="notion-text notion-block-89ad0dc5009b4be599c09cdc8c5041b9"><code class="notion-inline-code">loki test</code></div><div class="notion-text notion-block-d059554b2a9649d7bc6d9f1697736680">This command will go through all the screenshots in <code class="notion-inline-code">.loki/reference</code> directory and compare them with the newly available ones and if there is a difference, loki will create the regression images in <code class="notion-inline-code">.loki/difference</code> directory which is a git ignored directory as the diffs are not required to be added.</div><figure class="notion-asset-wrapper notion-asset-wrapper-image notion-block-bf63d981bb9c41218508cfa4770d5493"><div style="position:relative;display:flex;justify-content:center;align-self:center;width:100%;max-width:100%;flex-direction:column"><img src="https://www.notion.so/image/.%2Floki-test.png?table=block&amp;id=bf63d981-bb9c-4121-8508-cfa4770d5493&amp;cache=v2" alt="notion image" loading="lazy" decoding="async"/></div></figure><div class="notion-text notion-block-6c09a8aa019348659ec1c90734ebb895">That&#x27;s it, you can add these commands as npm scripts.</div><h3 class="notion-h notion-h2 notion-h-indent-0 notion-block-2025fee71934421aae3605f78a684fe6" data-id="2025fee71934421aae3605f78a684fe6"><span><div id="2025fee71934421aae3605f78a684fe6" class="notion-header-anchor"></div><a class="notion-hash-link" href="#2025fee71934421aae3605f78a684fe6" title="Custom File Name Formatter"><svg viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><span class="notion-h-title">Custom File Name Formatter</span></span></h3><div class="notion-text notion-block-0e6d0544f59c423aad40ebe8d411d743">You can very easily change the loki generated file names, by creating a custom function in the <code class="notion-inline-code">loki.config.js</code> file under <code class="notion-inline-code">fileNameFormatter</code> option.</div><div class="notion-text notion-block-ac052f2efc344194987e300d15e5e2b7">Where <code class="notion-inline-code">kind</code> is the story kind (e.g. Button), <code class="notion-inline-code">story</code> is the sub-story of <code class="notion-inline-code">kind</code> (e.g. Primary Button) and <code class="notion-inline-code">configurationName</code> refers to the keys in <code class="notion-inline-code">configurations</code> object in the config or targets.
With the above formatter, the generated file names would be like <code class="notion-inline-code">Button &gt; Basic on iPhone7</code>.
To define custom javascript functions and code, your loki config needs to be <code class="notion-inline-code">.js</code> and not in the <em>package.json</em></div><h3 class="notion-h notion-h2 notion-h-indent-0 notion-block-0cc8429b348e400583810ed38e7c8a34" data-id="0cc8429b348e400583810ed38e7c8a34"><span><div id="0cc8429b348e400583810ed38e7c8a34" class="notion-header-anchor"></div><a class="notion-hash-link" href="#0cc8429b348e400583810ed38e7c8a34" title="Skip Stories"><svg viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><span class="notion-h-title">Skip Stories</span></span></h3><div class="notion-text notion-block-ab0c158d07d44e998d23048ccc8c2510">Sometimes you want your stories to be skipped from the testing, just like <code class="notion-inline-code">it.skip</code> in jest.</div><div class="notion-text notion-block-1e5f743293a14ab8af4605c8b74892e7">It is very easy to do that.</div><h4 class="notion-h notion-h3 notion-h-indent-1 notion-block-eff57538d65245e7a376eefd28c41540" data-id="eff57538d65245e7a376eefd28c41540"><span><div id="eff57538d65245e7a376eefd28c41540" class="notion-header-anchor"></div><a class="notion-hash-link" href="#eff57538d65245e7a376eefd28c41540" title="All stories"><svg viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><span class="notion-h-title">All stories</span></span></h4><div class="notion-text notion-block-d4559a2dfd2c47c0a28e136bacbbf575">If you want to skip all your stories from a component/module, pass these parameters in the <code class="notion-inline-code">export default</code>.</div><h4 class="notion-h notion-h3 notion-h-indent-1 notion-block-272f3719913f4057abe9bbaff2439053" data-id="272f3719913f4057abe9bbaff2439053"><span><div id="272f3719913f4057abe9bbaff2439053" class="notion-header-anchor"></div><a class="notion-hash-link" href="#272f3719913f4057abe9bbaff2439053" title="Selected stories"><svg viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><span class="notion-h-title">Selected stories</span></span></h4><div class="notion-text notion-block-f8a90efb8ccd4a9db2df203b8bed6441">Or if you just want to skip a particular story, pass the parameter as properties to the story.</div><h3 class="notion-h notion-h2 notion-h-indent-0 notion-block-3a702ac88c8449b081a717ab6a9f8703" data-id="3a702ac88c8449b081a717ab6a9f8703"><span><div id="3a702ac88c8449b081a717ab6a9f8703" class="notion-header-anchor"></div><a class="notion-hash-link" href="#3a702ac88c8449b081a717ab6a9f8703" title="Run on CI (GitHub Actions)"><svg viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><span class="notion-h-title">Run on CI (GitHub Actions)</span></span></h3><div class="notion-text notion-block-1fc551784e9e4ee483755e4d476cbb85">Running loki on the CI is also very easy. But there is a caveat that is not mentioned in the docs very clearly. For running loki on CI, you should build your storybook and then run loki on the built static app as it may speed up the page loads and will run the tests faster.</div><div class="notion-text notion-block-fcf0f61697e740e0b073de06c07eabb0">Add the following command as an npm script.</div><div class="notion-text notion-block-31284b98826c48a6963d7656f256c63d">where the <code class="notion-inline-code">reactUri</code> refers to the storybook build directory and <code class="notion-inline-code">requireReference</code> fails stories when their reference images are not available.</div><div class="notion-text notion-block-5b04ed85e0a8472a9c59b845fa7cd4cb">The CI step may fail with this kind of an error -
<code class="notion-inline-code">FAIL chrome.docker/FETCH_STORIES: 1 request failed to load; file:///var/loki/iframe.html</code>, please refer to this comment for further details - <a target="_blank" rel="noopener noreferrer" class="notion-link" href="https://github.com/oblador/loki/issues/9#issuecomment-667277448">https://github.com/oblador/loki/issues/9#issuecomment-667277448</a></div><div class="notion-text notion-block-ebd45ade2a25489489612e6d04d44955">To fix this, add an option to your config, which will ensure that docker would use the available copy.</div><h3 class="notion-h notion-h2 notion-h-indent-0 notion-block-a9ac2648989f4949ab0c7cdf896d4e16" data-id="a9ac2648989f4949ab0c7cdf896d4e16"><span><div id="a9ac2648989f4949ab0c7cdf896d4e16" class="notion-header-anchor"></div><a class="notion-hash-link" href="#a9ac2648989f4949ab0c7cdf896d4e16" title="Tips"><svg viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><span class="notion-h-title">Tips</span></span></h3><ul class="notion-list notion-list-disc notion-block-501b93a67b11478ca4b42a6855d661c9"><li>Use <code class="notion-inline-code">http/https</code> protocol to load assets, for example, to load images don&#x27;t use <code class="notion-inline-code">//www.</code> format, but use <code class="notion-inline-code">https://www.</code> format, as the loki runner use file protocol to load the pages and the former one would not resolve in this case.</li></ul><ul class="notion-list notion-list-disc notion-block-6c9e5c8ffbb74c94b5fa372fd56dc72a"><li>Try to use as lightweight images/assets as possible, because it will reduce the flakiness of snapshots if during that moment the assets are loading.</li></ul><hr class="notion-hr notion-block-4d4db21247a34855a903c098e3a48835"/><div class="notion-text notion-block-7087d21ae899411da4049cb9f8f777c9">Refer to this repo - <a target="_blank" rel="noopener noreferrer" class="notion-link" href="https://github.com/maddhruv/storybook-loki-integration">https://github.com/maddhruv/storybook-loki-integration</a> and this commit for full integration changes - <a target="_blank" rel="noopener noreferrer" class="notion-link" href="https://github.com/maddhruv/storybook-loki-integration/commit/e40828148b75c4abb6b02786a7f07204eadaab46">https://github.com/maddhruv/storybook-loki-integration/commit/e40828148b75c4abb6b02786a7f07204eadaab46</a></div></main></main></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"pageData":{"recordMap":{"block":{"8c37e887-1d08-4b35-ac72-2c97a034bc78":{"role":"reader","value":{"id":"8c37e887-1d08-4b35-ac72-2c97a034bc78","version":89,"type":"page","properties":{"KU=I":[["Yes"]],"egRG":[["Integrate Loki-js with storybook for visual regression testing"]],"rQIr":[["â€£",[["d",{"type":"date","start_date":"2021-05-15"}]]]],"uDKy":[["JavaScript,Testing"]],"title":[["Storybook Loki Integration"]]},"content":["4e247a7d-5f3b-4b58-8485-bf8c0526c065","6e254eb2-efaf-439d-91d8-2ffb33e57f96","cfd6ad94-4192-48c0-80ef-9648b3cb61d7","290fd78a-5a10-4fc8-914a-da158364ee49","16831021-451b-4d05-b787-11949a7c370e","4d23e737-0e31-492e-a4fe-ce8d6c12d2fd","103cc851-a9fd-498b-aea0-0e70d09c924e","e0455121-8382-4f98-8723-1627d140dbc4","f22dace2-f98d-4a25-912e-9be41ebc956f","2cb3ab2c-1430-478f-9285-4ebbbaae1439","e27f74f3-62fe-4e44-99f3-680f3b3a29fe","a7d3b5e5-9841-459f-9a4c-119bf3ddfe05","47915351-c8e2-4187-8edc-6ea08a7b289d","6542fc7d-cc1f-4d45-8e74-a645d99c8d3f","987d5853-cbe5-4cb2-94c3-16e93e2a7261","e6ac1412-b44b-4bc0-8d7b-c10d6343bce6","31173e53-3e7e-4c42-8529-12cd6f8acedc","4eadcb0c-3f33-4b66-b73a-d513922feda7","22b39b86-8f32-4a55-a3b7-c9112932f222","bc24b170-f3b9-477d-941d-35677e9c0f72","f20eb482-aca6-4544-8596-504cb14b0e64","346fcaac-ee26-4129-8dbf-82101a1a6f12","f2d6fabf-a3ce-425b-a369-e3823039bd4c","eb81b399-f894-490c-a8f7-1f28055ffdf4","11190ad9-255e-4b44-9cf6-9713749724a0","67183c10-4b96-47e1-8d95-20540762918c","b4f7b5c8-55d9-489c-8842-4caa13fe8efa","605a8a0e-6c81-4f65-b0a3-6f337c1fcc76","a0618eae-40e9-4d4d-8e0c-c2a8db7df211","6753ae78-258c-4782-906f-9c76e2673562","39fd13fd-ef6b-4716-aad5-c4e08aca96b3","1128ac76-4534-42b9-b533-91d9a7d4f6c9","89ad0dc5-009b-4be5-99c0-9cdc8c5041b9","d059554b-2a96-49d7-bc6d-9f1697736680","bf63d981-bb9c-4121-8508-cfa4770d5493","6c09a8aa-0193-4865-9ec1-c90734ebb895","621570a4-848b-4456-ab58-67a5c7edfb12","2025fee7-1934-421a-ae36-05f78a684fe6","0e6d0544-f59c-423a-ad40-ebe8d411d743","58c27e14-8936-4080-b0b5-72fb0f4a9f97","ac052f2e-fc34-4194-987e-300d15e5e2b7","0cc8429b-348e-4005-8381-0ed38e7c8a34","ab0c158d-07d4-4e99-8d23-048ccc8c2510","1e5f7432-93a1-4ab8-af46-05c8b74892e7","eff57538-d652-45e7-a376-eefd28c41540","d4559a2d-fd2c-47c0-a28e-136bacbbf575","b7b997b8-2102-4160-b5bb-76d200e98af4","272f3719-913f-4057-abe9-bbaff2439053","f8a90efb-8ccd-4a9d-b2df-203b8bed6441","c30d7a00-8250-4a0c-b54f-56edd4219a55","3a702ac8-8c84-49b0-81a7-17ab6a9f8703","1fc55178-4e9e-4ee4-8375-5e4d476cbb85","fcf0f616-97e7-40e0-b073-de06c07eabb0","8812b092-4df0-404b-8792-fbbeb8b05707","31284b98-826c-48a6-963d-7656f256c63d","5b04ed85-e0a8-472a-9c59-b845fa7cd4cb","ebd45ade-2a25-4894-8961-2e6d04d44955","d64a8c86-7b4a-4761-9e0b-3a535780a034","a9ac2648-989f-4949-ab0c-7cdf896d4e16","501b93a6-7b11-478c-a4b4-2a6855d661c9","6c9e5c8f-fbb7-4c94-b5fa-372fd56dc72a","4d4db212-47a3-4855-a903-c098e3a48835","7087d21a-e899-411d-a404-9cb9f8f777c9"],"created_time":1659799922666,"last_edited_time":1659808080000,"parent_id":"68709411-c0b9-4d9c-b995-a3f4cde9837f","parent_table":"collection","alive":true,"created_by_table":"notion_user","created_by_id":"4a117995-d700-4cd6-969a-964f561e9cb2","last_edited_by_table":"notion_user","last_edited_by_id":"4a117995-d700-4cd6-969a-964f561e9cb2","space_id":"d7daae03-6acd-4b45-9e11-170a07bde7fa"}},"75f72675-84b3-4fe1-b177-f0d9457103cd":{"role":"reader","value":{"id":"75f72675-84b3-4fe1-b177-f0d9457103cd","version":50,"type":"collection_view_page","view_ids":["8747f097-3dd9-4d9e-ab0e-ebb0d9c269db"],"collection_id":"68709411-c0b9-4d9c-b995-a3f4cde9837f","format":{"collection_pointer":{"id":"68709411-c0b9-4d9c-b995-a3f4cde9837f","table":"collection","spaceId":"d7daae03-6acd-4b45-9e11-170a07bde7fa"}},"permissions":[{"role":"editor","type":"user_permission","user_id":"4a117995-d700-4cd6-969a-964f561e9cb2"},{"role":"reader","type":"public_permission","added_timestamp":1659799930185},{"role":{"read_content":true},"type":"bot_permission","bot_id":"76010e17-554f-4177-8431-1edf93b3c664","parent_id":"d7daae03-6acd-4b45-9e11-170a07bde7fa","parent_table":"space"}],"created_time":1659799922666,"last_edited_time":1659808618984,"parent_id":"d7daae03-6acd-4b45-9e11-170a07bde7fa","parent_table":"space","alive":true,"created_by_table":"notion_user","created_by_id":"4a117995-d700-4cd6-969a-964f561e9cb2","last_edited_by_table":"notion_user","last_edited_by_id":"4a117995-d700-4cd6-969a-964f561e9cb2","space_id":"d7daae03-6acd-4b45-9e11-170a07bde7fa"}},"4e247a7d-5f3b-4b58-8485-bf8c0526c065":{"role":"reader","value":{"id":"4e247a7d-5f3b-4b58-8485-bf8c0526c065","version":2,"type":"divider","created_time":1659800799216,"last_edited_time":1659800760000,"parent_id":"8c37e887-1d08-4b35-ac72-2c97a034bc78","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"4a117995-d700-4cd6-969a-964f561e9cb2","last_edited_by_table":"notion_user","last_edited_by_id":"4a117995-d700-4cd6-969a-964f561e9cb2","space_id":"d7daae03-6acd-4b45-9e11-170a07bde7fa"}},"6e254eb2-efaf-439d-91d8-2ffb33e57f96":{"role":"reader","value":{"id":"6e254eb2-efaf-439d-91d8-2ffb33e57f96","version":4,"type":"text","created_time":1659800799216,"last_edited_time":1659800760000,"parent_id":"8c37e887-1d08-4b35-ac72-2c97a034bc78","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"4a117995-d700-4cd6-969a-964f561e9cb2","last_edited_by_table":"notion_user","last_edited_by_id":"4a117995-d700-4cd6-969a-964f561e9cb2","space_id":"d7daae03-6acd-4b45-9e11-170a07bde7fa"}},"cfd6ad94-4192-48c0-80ef-9648b3cb61d7":{"role":"reader","value":{"id":"cfd6ad94-4192-48c0-80ef-9648b3cb61d7","version":2,"type":"text","properties":{"title":[["Loki",[["a","https://loki.js.org/"]]],[" is an easy-to-use visual regression tool for your storybook app that uses real browsers in docker environments and has multiple "],["diffing engines",[["a","https://loki.js.org/configuration.html#diffingengine"]]],[" to enable image comparisons."]]},"created_time":1659800799217,"last_edited_time":1659800760000,"parent_id":"8c37e887-1d08-4b35-ac72-2c97a034bc78","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"4a117995-d700-4cd6-969a-964f561e9cb2","last_edited_by_table":"notion_user","last_edited_by_id":"4a117995-d700-4cd6-969a-964f561e9cb2","space_id":"d7daae03-6acd-4b45-9e11-170a07bde7fa"}},"290fd78a-5a10-4fc8-914a-da158364ee49":{"role":"reader","value":{"id":"290fd78a-5a10-4fc8-914a-da158364ee49","version":2,"type":"text","properties":{"title":[["In this guide, we will walk through the integration of Loki with the storybook to enable visual regression for your stories. This guide doesn't cover any arguments on why and where to use visual regression testings. This guide covers:"]]},"created_time":1659800799217,"last_edited_time":1659800760000,"parent_id":"8c37e887-1d08-4b35-ac72-2c97a034bc78","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"4a117995-d700-4cd6-969a-964f561e9cb2","last_edited_by_table":"notion_user","last_edited_by_id":"4a117995-d700-4cd6-969a-964f561e9cb2","space_id":"d7daae03-6acd-4b45-9e11-170a07bde7fa"}},"16831021-451b-4d05-b787-11949a7c370e":{"role":"reader","value":{"id":"16831021-451b-4d05-b787-11949a7c370e","version":2,"type":"bulleted_list","properties":{"title":[["setting up Loki"]]},"created_time":1659800799217,"last_edited_time":1659800760000,"parent_id":"8c37e887-1d08-4b35-ac72-2c97a034bc78","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"4a117995-d700-4cd6-969a-964f561e9cb2","last_edited_by_table":"notion_user","last_edited_by_id":"4a117995-d700-4cd6-969a-964f561e9cb2","space_id":"d7daae03-6acd-4b45-9e11-170a07bde7fa"}},"4d23e737-0e31-492e-a4fe-ce8d6c12d2fd":{"role":"reader","value":{"id":"4d23e737-0e31-492e-a4fe-ce8d6c12d2fd","version":2,"type":"bulleted_list","properties":{"title":[["skipping stories"]]},"created_time":1659800799217,"last_edited_time":1659800760000,"parent_id":"8c37e887-1d08-4b35-ac72-2c97a034bc78","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"4a117995-d700-4cd6-969a-964f561e9cb2","last_edited_by_table":"notion_user","last_edited_by_id":"4a117995-d700-4cd6-969a-964f561e9cb2","space_id":"d7daae03-6acd-4b45-9e11-170a07bde7fa"}},"103cc851-a9fd-498b-aea0-0e70d09c924e":{"role":"reader","value":{"id":"103cc851-a9fd-498b-aea0-0e70d09c924e","version":2,"type":"bulleted_list","properties":{"title":[["enable Loki testing on GitHub Actions (CI)"]]},"created_time":1659800799217,"last_edited_time":1659800760000,"parent_id":"8c37e887-1d08-4b35-ac72-2c97a034bc78","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"4a117995-d700-4cd6-969a-964f561e9cb2","last_edited_by_table":"notion_user","last_edited_by_id":"4a117995-d700-4cd6-969a-964f561e9cb2","space_id":"d7daae03-6acd-4b45-9e11-170a07bde7fa"}},"e0455121-8382-4f98-8723-1627d140dbc4":{"role":"reader","value":{"id":"e0455121-8382-4f98-8723-1627d140dbc4","version":2,"type":"bulleted_list","properties":{"title":[["some tips to follow"]]},"created_time":1659800799217,"last_edited_time":1659800760000,"parent_id":"8c37e887-1d08-4b35-ac72-2c97a034bc78","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"4a117995-d700-4cd6-969a-964f561e9cb2","last_edited_by_table":"notion_user","last_edited_by_id":"4a117995-d700-4cd6-969a-964f561e9cb2","space_id":"d7daae03-6acd-4b45-9e11-170a07bde7fa"}},"f22dace2-f98d-4a25-912e-9be41ebc956f":{"role":"reader","value":{"id":"f22dace2-f98d-4a25-912e-9be41ebc956f","version":2,"type":"text","properties":{"title":[["Throughout this guide, we will be using this repository "],["maddhruv/storybook-loki-integration",[["a","https://github.com/maddhruv/storybook-loki-integration"]]],[" as a reference to the integration."]]},"created_time":1659800799218,"last_edited_time":1659800760000,"parent_id":"8c37e887-1d08-4b35-ac72-2c97a034bc78","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"4a117995-d700-4cd6-969a-964f561e9cb2","last_edited_by_table":"notion_user","last_edited_by_id":"4a117995-d700-4cd6-969a-964f561e9cb2","space_id":"d7daae03-6acd-4b45-9e11-170a07bde7fa"}},"2cb3ab2c-1430-478f-9285-4ebbbaae1439":{"role":"reader","value":{"id":"2cb3ab2c-1430-478f-9285-4ebbbaae1439","version":2,"type":"text","properties":{"title":[["Let's get started."]]},"created_time":1659800799218,"last_edited_time":1659800760000,"parent_id":"8c37e887-1d08-4b35-ac72-2c97a034bc78","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"4a117995-d700-4cd6-969a-964f561e9cb2","last_edited_by_table":"notion_user","last_edited_by_id":"4a117995-d700-4cd6-969a-964f561e9cb2","space_id":"d7daae03-6acd-4b45-9e11-170a07bde7fa"}},"e27f74f3-62fe-4e44-99f3-680f3b3a29fe":{"role":"reader","value":{"id":"e27f74f3-62fe-4e44-99f3-680f3b3a29fe","version":2,"type":"sub_header","properties":{"title":[["Prerequisites"]]},"created_time":1659800799218,"last_edited_time":1659800760000,"parent_id":"8c37e887-1d08-4b35-ac72-2c97a034bc78","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"4a117995-d700-4cd6-969a-964f561e9cb2","last_edited_by_table":"notion_user","last_edited_by_id":"4a117995-d700-4cd6-969a-964f561e9cb2","space_id":"d7daae03-6acd-4b45-9e11-170a07bde7fa"}},"a7d3b5e5-9841-459f-9a4c-119bf3ddfe05":{"role":"reader","value":{"id":"a7d3b5e5-9841-459f-9a4c-119bf3ddfe05","version":2,"type":"bulleted_list","properties":{"title":[["Docker (for certain targets)"]]},"created_time":1659800799218,"last_edited_time":1659800760000,"parent_id":"8c37e887-1d08-4b35-ac72-2c97a034bc78","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"4a117995-d700-4cd6-969a-964f561e9cb2","last_edited_by_table":"notion_user","last_edited_by_id":"4a117995-d700-4cd6-969a-964f561e9cb2","space_id":"d7daae03-6acd-4b45-9e11-170a07bde7fa"}},"47915351-c8e2-4187-8edc-6ea08a7b289d":{"role":"reader","value":{"id":"47915351-c8e2-4187-8edc-6ea08a7b289d","version":2,"type":"sub_header","properties":{"title":[["Install Loki"]]},"created_time":1659800799218,"last_edited_time":1659800760000,"parent_id":"8c37e887-1d08-4b35-ac72-2c97a034bc78","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"4a117995-d700-4cd6-969a-964f561e9cb2","last_edited_by_table":"notion_user","last_edited_by_id":"4a117995-d700-4cd6-969a-964f561e9cb2","space_id":"d7daae03-6acd-4b45-9e11-170a07bde7fa"}},"6542fc7d-cc1f-4d45-8e74-a645d99c8d3f":{"role":"reader","value":{"id":"6542fc7d-cc1f-4d45-8e74-a645d99c8d3f","version":2,"type":"text","properties":{"title":[["It is preassumed that your app has storybook integrated and working. Install loki as a dev dependency to your node app."]]},"created_time":1659800799218,"last_edited_time":1659800760000,"parent_id":"8c37e887-1d08-4b35-ac72-2c97a034bc78","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"4a117995-d700-4cd6-969a-964f561e9cb2","last_edited_by_table":"notion_user","last_edited_by_id":"4a117995-d700-4cd6-969a-964f561e9cb2","space_id":"d7daae03-6acd-4b45-9e11-170a07bde7fa"}},"987d5853-cbe5-4cb2-94c3-16e93e2a7261":{"role":"reader","value":{"id":"987d5853-cbe5-4cb2-94c3-16e93e2a7261","version":2,"type":"text","properties":{"title":[["npm i loki -D",[["c"]]],[" or "],["yarn add loki -D",[["c"]]]]},"created_time":1659800799218,"last_edited_time":1659800760000,"parent_id":"8c37e887-1d08-4b35-ac72-2c97a034bc78","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"4a117995-d700-4cd6-969a-964f561e9cb2","last_edited_by_table":"notion_user","last_edited_by_id":"4a117995-d700-4cd6-969a-964f561e9cb2","space_id":"d7daae03-6acd-4b45-9e11-170a07bde7fa"}},"e6ac1412-b44b-4bc0-8d7b-c10d6343bce6":{"role":"reader","value":{"id":"e6ac1412-b44b-4bc0-8d7b-c10d6343bce6","version":2,"type":"text","properties":{"title":[["And that's it, installation is as easy as that."]]},"created_time":1659800799218,"last_edited_time":1659800760000,"parent_id":"8c37e887-1d08-4b35-ac72-2c97a034bc78","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"4a117995-d700-4cd6-969a-964f561e9cb2","last_edited_by_table":"notion_user","last_edited_by_id":"4a117995-d700-4cd6-969a-964f561e9cb2","space_id":"d7daae03-6acd-4b45-9e11-170a07bde7fa"}},"31173e53-3e7e-4c42-8529-12cd6f8acedc":{"role":"reader","value":{"id":"31173e53-3e7e-4c42-8529-12cd6f8acedc","version":2,"type":"sub_header","properties":{"title":[["Setup Loki"]]},"created_time":1659800799218,"last_edited_time":1659800760000,"parent_id":"8c37e887-1d08-4b35-ac72-2c97a034bc78","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"4a117995-d700-4cd6-969a-964f561e9cb2","last_edited_by_table":"notion_user","last_edited_by_id":"4a117995-d700-4cd6-969a-964f561e9cb2","space_id":"d7daae03-6acd-4b45-9e11-170a07bde7fa"}},"4eadcb0c-3f33-4b66-b73a-d513922feda7":{"role":"reader","value":{"id":"4eadcb0c-3f33-4b66-b73a-d513922feda7","version":2,"type":"text","properties":{"title":[["Loki comes with an in-built command to initialize the loki "],["configuration",[["a","https://loki.js.org/configuration.html"]]],[" which is "],["loki init",[["c"]]],[" but I will not recommend you to use that, as it adds the configuration to the "],["package.json",[["i"]]],[" by default and sometimes the overrides are not what you would want."]]},"created_time":1659800799218,"last_edited_time":1659800760000,"parent_id":"8c37e887-1d08-4b35-ac72-2c97a034bc78","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"4a117995-d700-4cd6-969a-964f561e9cb2","last_edited_by_table":"notion_user","last_edited_by_id":"4a117995-d700-4cd6-969a-964f561e9cb2","space_id":"d7daae03-6acd-4b45-9e11-170a07bde7fa"}},"22b39b86-8f32-4a55-a3b7-c9112932f222":{"role":"reader","value":{"id":"22b39b86-8f32-4a55-a3b7-c9112932f222","version":2,"type":"text","properties":{"title":[["But what is the issue in adding the config to the "],["package.json",[["i"]]],[", no there is not unless your want to write custom formatter and enable the testing on CI. Don't worry, we will get to it in a moment."]]},"created_time":1659800799218,"last_edited_time":1659800760000,"parent_id":"8c37e887-1d08-4b35-ac72-2c97a034bc78","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"4a117995-d700-4cd6-969a-964f561e9cb2","last_edited_by_table":"notion_user","last_edited_by_id":"4a117995-d700-4cd6-969a-964f561e9cb2","space_id":"d7daae03-6acd-4b45-9e11-170a07bde7fa"}},"bc24b170-f3b9-477d-941d-35677e9c0f72":{"role":"reader","value":{"id":"bc24b170-f3b9-477d-941d-35677e9c0f72","version":2,"type":"text","properties":{"title":[["For now, let's create a file called "],["loki.config.js",[["c"]]],[" and add the following configuration to it."]]},"created_time":1659800799218,"last_edited_time":1659800760000,"parent_id":"8c37e887-1d08-4b35-ac72-2c97a034bc78","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"4a117995-d700-4cd6-969a-964f561e9cb2","last_edited_by_table":"notion_user","last_edited_by_id":"4a117995-d700-4cd6-969a-964f561e9cb2","space_id":"d7daae03-6acd-4b45-9e11-170a07bde7fa"}},"f20eb482-aca6-4544-8596-504cb14b0e64":{"role":"reader","value":{"id":"f20eb482-aca6-4544-8596-504cb14b0e64","version":2,"type":"code","properties":{"title":[["module.exports = {\n  configurations: {\n    'chrome.laptop': {\n      target: 'chrome.docker',\n      width: 1366,\n      height: 768,\n      deviceScaleFactor: 1,\n      mobile: false,\n    },\n    'chrome.iphone7': {\n      target: 'chrome.docker',\n      preset: 'iPhone 7',\n    },\n  },\n};\n"]],"language":[["Plain Text"]]},"format":{"code_wrap":true},"created_time":1659800799218,"last_edited_time":1659800760000,"parent_id":"8c37e887-1d08-4b35-ac72-2c97a034bc78","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"4a117995-d700-4cd6-969a-964f561e9cb2","last_edited_by_table":"notion_user","last_edited_by_id":"4a117995-d700-4cd6-969a-964f561e9cb2","space_id":"d7daae03-6acd-4b45-9e11-170a07bde7fa"}},"346fcaac-ee26-4129-8dbf-82101a1a6f12":{"role":"reader","value":{"id":"346fcaac-ee26-4129-8dbf-82101a1a6f12","version":2,"type":"text","properties":{"title":[["It just enables the testing on two targets - chrome on docker as desktop and chrome on iPhone7. You can configure your targets or devices using the "],["target",[["c"]]],[" options here - "],["#configurations",[["a","https://loki.js.org/configuration.html#configurations"]]],[". The testing time is linearly proportional to the number of targets."]]},"created_time":1659800799218,"last_edited_time":1659800760000,"parent_id":"8c37e887-1d08-4b35-ac72-2c97a034bc78","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"4a117995-d700-4cd6-969a-964f561e9cb2","last_edited_by_table":"notion_user","last_edited_by_id":"4a117995-d700-4cd6-969a-964f561e9cb2","space_id":"d7daae03-6acd-4b45-9e11-170a07bde7fa"}},"f2d6fabf-a3ce-425b-a369-e3823039bd4c":{"role":"reader","value":{"id":"f2d6fabf-a3ce-425b-a369-e3823039bd4c","version":2,"type":"sub_header","properties":{"title":[["Run Loki"]]},"created_time":1659800799218,"last_edited_time":1659800760000,"parent_id":"8c37e887-1d08-4b35-ac72-2c97a034bc78","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"4a117995-d700-4cd6-969a-964f561e9cb2","last_edited_by_table":"notion_user","last_edited_by_id":"4a117995-d700-4cd6-969a-964f561e9cb2","space_id":"d7daae03-6acd-4b45-9e11-170a07bde7fa"}},"eb81b399-f894-490c-a8f7-1f28055ffdf4":{"role":"reader","value":{"id":"eb81b399-f894-490c-a8f7-1f28055ffdf4","version":2,"type":"text","properties":{"title":[["It's time to run loki and add snapshots. For the first time, you would need to run "],["loki update",[["c"]]],[" to add all the possible snapshots/screenshots. This will create a "],[".loki",[["c"]]],[" directory and save all the snapshots there."]]},"created_time":1659800799219,"last_edited_time":1659800760000,"parent_id":"8c37e887-1d08-4b35-ac72-2c97a034bc78","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"4a117995-d700-4cd6-969a-964f561e9cb2","last_edited_by_table":"notion_user","last_edited_by_id":"4a117995-d700-4cd6-969a-964f561e9cb2","space_id":"d7daae03-6acd-4b45-9e11-170a07bde7fa"}},"11190ad9-255e-4b44-9cf6-9713749724a0":{"role":"reader","value":{"id":"11190ad9-255e-4b44-9cf6-9713749724a0","version":2,"type":"text","properties":{"title":[["loki update",[["c"]]]]},"created_time":1659800799219,"last_edited_time":1659800760000,"parent_id":"8c37e887-1d08-4b35-ac72-2c97a034bc78","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"4a117995-d700-4cd6-969a-964f561e9cb2","last_edited_by_table":"notion_user","last_edited_by_id":"4a117995-d700-4cd6-969a-964f561e9cb2","space_id":"d7daae03-6acd-4b45-9e11-170a07bde7fa"}},"67183c10-4b96-47e1-8d95-20540762918c":{"role":"reader","value":{"id":"67183c10-4b96-47e1-8d95-20540762918c","version":2,"type":"text","properties":{"title":[["update",[["c"]]],[" by default runs on the "],["6006",[["c"]]],[" port. You may need to pass the storybook app port to the command above, use the options "],["--port",[["c"]]],[" for that, and run your storybook app before running loki."]]},"created_time":1659800799219,"last_edited_time":1659800760000,"parent_id":"8c37e887-1d08-4b35-ac72-2c97a034bc78","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"4a117995-d700-4cd6-969a-964f561e9cb2","last_edited_by_table":"notion_user","last_edited_by_id":"4a117995-d700-4cd6-969a-964f561e9cb2","space_id":"d7daae03-6acd-4b45-9e11-170a07bde7fa"}},"b4f7b5c8-55d9-489c-8842-4caa13fe8efa":{"role":"reader","value":{"id":"b4f7b5c8-55d9-489c-8842-4caa13fe8efa","version":2,"type":"text","properties":{"title":[["loki update --port 1337",[["c"]]]]},"created_time":1659800799219,"last_edited_time":1659800760000,"parent_id":"8c37e887-1d08-4b35-ac72-2c97a034bc78","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"4a117995-d700-4cd6-969a-964f561e9cb2","last_edited_by_table":"notion_user","last_edited_by_id":"4a117995-d700-4cd6-969a-964f561e9cb2","space_id":"d7daae03-6acd-4b45-9e11-170a07bde7fa"}},"605a8a0e-6c81-4f65-b0a3-6f337c1fcc76":{"role":"reader","value":{"id":"605a8a0e-6c81-4f65-b0a3-6f337c1fcc76","version":2,"type":"quote","properties":{"title":[["Loki update will fetch the required docker images for you and then update the snapshots"]]},"created_time":1659800799219,"last_edited_time":1659800760000,"parent_id":"8c37e887-1d08-4b35-ac72-2c97a034bc78","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"4a117995-d700-4cd6-969a-964f561e9cb2","last_edited_by_table":"notion_user","last_edited_by_id":"4a117995-d700-4cd6-969a-964f561e9cb2","space_id":"d7daae03-6acd-4b45-9e11-170a07bde7fa"}},"a0618eae-40e9-4d4d-8e0c-c2a8db7df211":{"role":"reader","value":{"id":"a0618eae-40e9-4d4d-8e0c-c2a8db7df211","version":2,"type":"image","properties":{"source":[["./loki-update.png"]]},"created_time":1659800799219,"last_edited_time":1659800760000,"parent_id":"8c37e887-1d08-4b35-ac72-2c97a034bc78","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"4a117995-d700-4cd6-969a-964f561e9cb2","last_edited_by_table":"notion_user","last_edited_by_id":"4a117995-d700-4cd6-969a-964f561e9cb2","space_id":"d7daae03-6acd-4b45-9e11-170a07bde7fa"}},"6753ae78-258c-4782-906f-9c76e2673562":{"role":"reader","value":{"id":"6753ae78-258c-4782-906f-9c76e2673562","version":2,"type":"text","properties":{"title":[["All the generated screenshots are available under "],[".loki/reference",[["c"]]],[" directory."]]},"created_time":1659800799219,"last_edited_time":1659800760000,"parent_id":"8c37e887-1d08-4b35-ac72-2c97a034bc78","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"4a117995-d700-4cd6-969a-964f561e9cb2","last_edited_by_table":"notion_user","last_edited_by_id":"4a117995-d700-4cd6-969a-964f561e9cb2","space_id":"d7daae03-6acd-4b45-9e11-170a07bde7fa"}},"39fd13fd-ef6b-4716-aad5-c4e08aca96b3":{"role":"reader","value":{"id":"39fd13fd-ef6b-4716-aad5-c4e08aca96b3","version":2,"type":"sub_header","properties":{"title":[["Run Test"]]},"created_time":1659800799219,"last_edited_time":1659800760000,"parent_id":"8c37e887-1d08-4b35-ac72-2c97a034bc78","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"4a117995-d700-4cd6-969a-964f561e9cb2","last_edited_by_table":"notion_user","last_edited_by_id":"4a117995-d700-4cd6-969a-964f561e9cb2","space_id":"d7daae03-6acd-4b45-9e11-170a07bde7fa"}},"1128ac76-4534-42b9-b533-91d9a7d4f6c9":{"role":"reader","value":{"id":"1128ac76-4534-42b9-b533-91d9a7d4f6c9","version":2,"type":"text","properties":{"title":[["After when you have generated the snapshots. It is time to run the actual tests if anything has changed visually. Just make any changes to your components/stories and then run."]]},"created_time":1659800799219,"last_edited_time":1659800760000,"parent_id":"8c37e887-1d08-4b35-ac72-2c97a034bc78","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"4a117995-d700-4cd6-969a-964f561e9cb2","last_edited_by_table":"notion_user","last_edited_by_id":"4a117995-d700-4cd6-969a-964f561e9cb2","space_id":"d7daae03-6acd-4b45-9e11-170a07bde7fa"}},"89ad0dc5-009b-4be5-99c0-9cdc8c5041b9":{"role":"reader","value":{"id":"89ad0dc5-009b-4be5-99c0-9cdc8c5041b9","version":2,"type":"text","properties":{"title":[["loki test",[["c"]]]]},"created_time":1659800799219,"last_edited_time":1659800760000,"parent_id":"8c37e887-1d08-4b35-ac72-2c97a034bc78","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"4a117995-d700-4cd6-969a-964f561e9cb2","last_edited_by_table":"notion_user","last_edited_by_id":"4a117995-d700-4cd6-969a-964f561e9cb2","space_id":"d7daae03-6acd-4b45-9e11-170a07bde7fa"}},"d059554b-2a96-49d7-bc6d-9f1697736680":{"role":"reader","value":{"id":"d059554b-2a96-49d7-bc6d-9f1697736680","version":2,"type":"text","properties":{"title":[["This command will go through all the screenshots in "],[".loki/reference",[["c"]]],[" directory and compare them with the newly available ones and if there is a difference, loki will create the regression images in "],[".loki/difference",[["c"]]],[" directory which is a git ignored directory as the diffs are not required to be added."]]},"created_time":1659800799219,"last_edited_time":1659800760000,"parent_id":"8c37e887-1d08-4b35-ac72-2c97a034bc78","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"4a117995-d700-4cd6-969a-964f561e9cb2","last_edited_by_table":"notion_user","last_edited_by_id":"4a117995-d700-4cd6-969a-964f561e9cb2","space_id":"d7daae03-6acd-4b45-9e11-170a07bde7fa"}},"bf63d981-bb9c-4121-8508-cfa4770d5493":{"role":"reader","value":{"id":"bf63d981-bb9c-4121-8508-cfa4770d5493","version":2,"type":"image","properties":{"source":[["./loki-test.png"]]},"created_time":1659800799219,"last_edited_time":1659800760000,"parent_id":"8c37e887-1d08-4b35-ac72-2c97a034bc78","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"4a117995-d700-4cd6-969a-964f561e9cb2","last_edited_by_table":"notion_user","last_edited_by_id":"4a117995-d700-4cd6-969a-964f561e9cb2","space_id":"d7daae03-6acd-4b45-9e11-170a07bde7fa"}},"6c09a8aa-0193-4865-9ec1-c90734ebb895":{"role":"reader","value":{"id":"6c09a8aa-0193-4865-9ec1-c90734ebb895","version":2,"type":"text","properties":{"title":[["That's it, you can add these commands as npm scripts."]]},"created_time":1659800799219,"last_edited_time":1659800760000,"parent_id":"8c37e887-1d08-4b35-ac72-2c97a034bc78","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"4a117995-d700-4cd6-969a-964f561e9cb2","last_edited_by_table":"notion_user","last_edited_by_id":"4a117995-d700-4cd6-969a-964f561e9cb2","space_id":"d7daae03-6acd-4b45-9e11-170a07bde7fa"}},"621570a4-848b-4456-ab58-67a5c7edfb12":{"role":"reader","value":{"id":"621570a4-848b-4456-ab58-67a5c7edfb12","version":2,"type":"code","properties":{"title":[["{\n  \"loki:update\": \"loki update\",\n  \"loki:test\": \"loki test\"\n}\n"]],"language":[["Plain Text"]]},"format":{"code_wrap":true},"created_time":1659800799219,"last_edited_time":1659800760000,"parent_id":"8c37e887-1d08-4b35-ac72-2c97a034bc78","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"4a117995-d700-4cd6-969a-964f561e9cb2","last_edited_by_table":"notion_user","last_edited_by_id":"4a117995-d700-4cd6-969a-964f561e9cb2","space_id":"d7daae03-6acd-4b45-9e11-170a07bde7fa"}},"2025fee7-1934-421a-ae36-05f78a684fe6":{"role":"reader","value":{"id":"2025fee7-1934-421a-ae36-05f78a684fe6","version":2,"type":"sub_header","properties":{"title":[["Custom File Name Formatter"]]},"created_time":1659800799219,"last_edited_time":1659800760000,"parent_id":"8c37e887-1d08-4b35-ac72-2c97a034bc78","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"4a117995-d700-4cd6-969a-964f561e9cb2","last_edited_by_table":"notion_user","last_edited_by_id":"4a117995-d700-4cd6-969a-964f561e9cb2","space_id":"d7daae03-6acd-4b45-9e11-170a07bde7fa"}},"0e6d0544-f59c-423a-ad40-ebe8d411d743":{"role":"reader","value":{"id":"0e6d0544-f59c-423a-ad40-ebe8d411d743","version":2,"type":"text","properties":{"title":[["You can very easily change the loki generated file names, by creating a custom function in the "],["loki.config.js",[["c"]]],[" file under "],["fileNameFormatter",[["c"]]],[" option."]]},"created_time":1659800799219,"last_edited_time":1659800760000,"parent_id":"8c37e887-1d08-4b35-ac72-2c97a034bc78","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"4a117995-d700-4cd6-969a-964f561e9cb2","last_edited_by_table":"notion_user","last_edited_by_id":"4a117995-d700-4cd6-969a-964f561e9cb2","space_id":"d7daae03-6acd-4b45-9e11-170a07bde7fa"}},"58c27e14-8936-4080-b0b5-72fb0f4a9f97":{"role":"reader","value":{"id":"58c27e14-8936-4080-b0b5-72fb0f4a9f97","version":2,"type":"code","properties":{"title":[["{\nfileNameFormatter: ({ configurationName, kind, story }) =\u003e\n    `${kind} \u003e ${story} on ${configurationName.split('.')[1]}`.toLowerCase()\n}\n"]],"language":[["Plain Text"]]},"format":{"code_wrap":true},"created_time":1659800799219,"last_edited_time":1659800760000,"parent_id":"8c37e887-1d08-4b35-ac72-2c97a034bc78","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"4a117995-d700-4cd6-969a-964f561e9cb2","last_edited_by_table":"notion_user","last_edited_by_id":"4a117995-d700-4cd6-969a-964f561e9cb2","space_id":"d7daae03-6acd-4b45-9e11-170a07bde7fa"}},"ac052f2e-fc34-4194-987e-300d15e5e2b7":{"role":"reader","value":{"id":"ac052f2e-fc34-4194-987e-300d15e5e2b7","version":2,"type":"text","properties":{"title":[["Where "],["kind",[["c"]]],[" is the story kind (e.g. Button), "],["story",[["c"]]],[" is the sub-story of "],["kind",[["c"]]],[" (e.g. Primary Button) and "],["configurationName",[["c"]]],[" refers to the keys in "],["configurations",[["c"]]],[" object in the config or targets.\nWith the above formatter, the generated file names would be like "],["Button \u003e Basic on iPhone7",[["c"]]],[".\nTo define custom javascript functions and code, your loki config needs to be "],[".js",[["c"]]],[" and not in the "],["package.json",[["i"]]]]},"created_time":1659800799219,"last_edited_time":1659800760000,"parent_id":"8c37e887-1d08-4b35-ac72-2c97a034bc78","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"4a117995-d700-4cd6-969a-964f561e9cb2","last_edited_by_table":"notion_user","last_edited_by_id":"4a117995-d700-4cd6-969a-964f561e9cb2","space_id":"d7daae03-6acd-4b45-9e11-170a07bde7fa"}},"0cc8429b-348e-4005-8381-0ed38e7c8a34":{"role":"reader","value":{"id":"0cc8429b-348e-4005-8381-0ed38e7c8a34","version":2,"type":"sub_header","properties":{"title":[["Skip Stories"]]},"created_time":1659800799220,"last_edited_time":1659800760000,"parent_id":"8c37e887-1d08-4b35-ac72-2c97a034bc78","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"4a117995-d700-4cd6-969a-964f561e9cb2","last_edited_by_table":"notion_user","last_edited_by_id":"4a117995-d700-4cd6-969a-964f561e9cb2","space_id":"d7daae03-6acd-4b45-9e11-170a07bde7fa"}},"ab0c158d-07d4-4e99-8d23-048ccc8c2510":{"role":"reader","value":{"id":"ab0c158d-07d4-4e99-8d23-048ccc8c2510","version":2,"type":"text","properties":{"title":[["Sometimes you want your stories to be skipped from the testing, just like "],["it.skip",[["c"]]],[" in jest."]]},"created_time":1659800799220,"last_edited_time":1659800760000,"parent_id":"8c37e887-1d08-4b35-ac72-2c97a034bc78","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"4a117995-d700-4cd6-969a-964f561e9cb2","last_edited_by_table":"notion_user","last_edited_by_id":"4a117995-d700-4cd6-969a-964f561e9cb2","space_id":"d7daae03-6acd-4b45-9e11-170a07bde7fa"}},"1e5f7432-93a1-4ab8-af46-05c8b74892e7":{"role":"reader","value":{"id":"1e5f7432-93a1-4ab8-af46-05c8b74892e7","version":2,"type":"text","properties":{"title":[["It is very easy to do that."]]},"created_time":1659800799220,"last_edited_time":1659800760000,"parent_id":"8c37e887-1d08-4b35-ac72-2c97a034bc78","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"4a117995-d700-4cd6-969a-964f561e9cb2","last_edited_by_table":"notion_user","last_edited_by_id":"4a117995-d700-4cd6-969a-964f561e9cb2","space_id":"d7daae03-6acd-4b45-9e11-170a07bde7fa"}},"eff57538-d652-45e7-a376-eefd28c41540":{"role":"reader","value":{"id":"eff57538-d652-45e7-a376-eefd28c41540","version":2,"type":"sub_sub_header","properties":{"title":[["All stories"]]},"created_time":1659800799220,"last_edited_time":1659800760000,"parent_id":"8c37e887-1d08-4b35-ac72-2c97a034bc78","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"4a117995-d700-4cd6-969a-964f561e9cb2","last_edited_by_table":"notion_user","last_edited_by_id":"4a117995-d700-4cd6-969a-964f561e9cb2","space_id":"d7daae03-6acd-4b45-9e11-170a07bde7fa"}},"d4559a2d-fd2c-47c0-a28e-136bacbbf575":{"role":"reader","value":{"id":"d4559a2d-fd2c-47c0-a28e-136bacbbf575","version":2,"type":"text","properties":{"title":[["If you want to skip all your stories from a component/module, pass these parameters in the "],["export default",[["c"]]],["."]]},"created_time":1659800799220,"last_edited_time":1659800760000,"parent_id":"8c37e887-1d08-4b35-ac72-2c97a034bc78","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"4a117995-d700-4cd6-969a-964f561e9cb2","last_edited_by_table":"notion_user","last_edited_by_id":"4a117995-d700-4cd6-969a-964f561e9cb2","space_id":"d7daae03-6acd-4b45-9e11-170a07bde7fa"}},"b7b997b8-2102-4160-b5bb-76d200e98af4":{"role":"reader","value":{"id":"b7b997b8-2102-4160-b5bb-76d200e98af4","version":2,"type":"code","properties":{"title":[["export default {\n  component: Button,\n  title: 'Button',\n  parameters: {\n    loki: {\n      skip: true,\n    },\n  },\n};\n"]],"language":[["Plain Text"]]},"format":{"code_wrap":true},"created_time":1659800799220,"last_edited_time":1659800760000,"parent_id":"8c37e887-1d08-4b35-ac72-2c97a034bc78","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"4a117995-d700-4cd6-969a-964f561e9cb2","last_edited_by_table":"notion_user","last_edited_by_id":"4a117995-d700-4cd6-969a-964f561e9cb2","space_id":"d7daae03-6acd-4b45-9e11-170a07bde7fa"}},"272f3719-913f-4057-abe9-bbaff2439053":{"role":"reader","value":{"id":"272f3719-913f-4057-abe9-bbaff2439053","version":2,"type":"sub_sub_header","properties":{"title":[["Selected stories"]]},"created_time":1659800799220,"last_edited_time":1659800760000,"parent_id":"8c37e887-1d08-4b35-ac72-2c97a034bc78","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"4a117995-d700-4cd6-969a-964f561e9cb2","last_edited_by_table":"notion_user","last_edited_by_id":"4a117995-d700-4cd6-969a-964f561e9cb2","space_id":"d7daae03-6acd-4b45-9e11-170a07bde7fa"}},"f8a90efb-8ccd-4a9d-b2df-203b8bed6441":{"role":"reader","value":{"id":"f8a90efb-8ccd-4a9d-b2df-203b8bed6441","version":2,"type":"text","properties":{"title":[["Or if you just want to skip a particular story, pass the parameter as properties to the story."]]},"created_time":1659800799220,"last_edited_time":1659800760000,"parent_id":"8c37e887-1d08-4b35-ac72-2c97a034bc78","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"4a117995-d700-4cd6-969a-964f561e9cb2","last_edited_by_table":"notion_user","last_edited_by_id":"4a117995-d700-4cd6-969a-964f561e9cb2","space_id":"d7daae03-6acd-4b45-9e11-170a07bde7fa"}},"c30d7a00-8250-4a0c-b54f-56edd4219a55":{"role":"reader","value":{"id":"c30d7a00-8250-4a0c-b54f-56edd4219a55","version":2,"type":"code","properties":{"title":[["Basic.parameters = {\n  loki: {\n    skip: true,\n  },\n};\n"]],"language":[["Plain Text"]]},"format":{"code_wrap":true},"created_time":1659800799220,"last_edited_time":1659800760000,"parent_id":"8c37e887-1d08-4b35-ac72-2c97a034bc78","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"4a117995-d700-4cd6-969a-964f561e9cb2","last_edited_by_table":"notion_user","last_edited_by_id":"4a117995-d700-4cd6-969a-964f561e9cb2","space_id":"d7daae03-6acd-4b45-9e11-170a07bde7fa"}},"3a702ac8-8c84-49b0-81a7-17ab6a9f8703":{"role":"reader","value":{"id":"3a702ac8-8c84-49b0-81a7-17ab6a9f8703","version":2,"type":"sub_header","properties":{"title":[["Run on CI (GitHub Actions)"]]},"created_time":1659800799220,"last_edited_time":1659800760000,"parent_id":"8c37e887-1d08-4b35-ac72-2c97a034bc78","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"4a117995-d700-4cd6-969a-964f561e9cb2","last_edited_by_table":"notion_user","last_edited_by_id":"4a117995-d700-4cd6-969a-964f561e9cb2","space_id":"d7daae03-6acd-4b45-9e11-170a07bde7fa"}},"1fc55178-4e9e-4ee4-8375-5e4d476cbb85":{"role":"reader","value":{"id":"1fc55178-4e9e-4ee4-8375-5e4d476cbb85","version":2,"type":"text","properties":{"title":[["Running loki on the CI is also very easy. But there is a caveat that is not mentioned in the docs very clearly. For running loki on CI, you should build your storybook and then run loki on the built static app as it may speed up the page loads and will run the tests faster."]]},"created_time":1659800799220,"last_edited_time":1659800760000,"parent_id":"8c37e887-1d08-4b35-ac72-2c97a034bc78","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"4a117995-d700-4cd6-969a-964f561e9cb2","last_edited_by_table":"notion_user","last_edited_by_id":"4a117995-d700-4cd6-969a-964f561e9cb2","space_id":"d7daae03-6acd-4b45-9e11-170a07bde7fa"}},"fcf0f616-97e7-40e0-b073-de06c07eabb0":{"role":"reader","value":{"id":"fcf0f616-97e7-40e0-b073-de06c07eabb0","version":2,"type":"text","properties":{"title":[["Add the following command as an npm script."]]},"created_time":1659800799220,"last_edited_time":1659800760000,"parent_id":"8c37e887-1d08-4b35-ac72-2c97a034bc78","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"4a117995-d700-4cd6-969a-964f561e9cb2","last_edited_by_table":"notion_user","last_edited_by_id":"4a117995-d700-4cd6-969a-964f561e9cb2","space_id":"d7daae03-6acd-4b45-9e11-170a07bde7fa"}},"8812b092-4df0-404b-8792-fbbeb8b05707":{"role":"reader","value":{"id":"8812b092-4df0-404b-8792-fbbeb8b05707","version":2,"type":"code","properties":{"title":[["{\n  \"loki:ci\": \"loki --requireReference --reactUri file:./storybook-static\"\n}\n"]],"language":[["Plain Text"]]},"format":{"code_wrap":true},"created_time":1659800799220,"last_edited_time":1659800760000,"parent_id":"8c37e887-1d08-4b35-ac72-2c97a034bc78","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"4a117995-d700-4cd6-969a-964f561e9cb2","last_edited_by_table":"notion_user","last_edited_by_id":"4a117995-d700-4cd6-969a-964f561e9cb2","space_id":"d7daae03-6acd-4b45-9e11-170a07bde7fa"}},"31284b98-826c-48a6-963d-7656f256c63d":{"role":"reader","value":{"id":"31284b98-826c-48a6-963d-7656f256c63d","version":2,"type":"text","properties":{"title":[["where the "],["reactUri",[["c"]]],[" refers to the storybook build directory and "],["requireReference",[["c"]]],[" fails stories when their reference images are not available."]]},"created_time":1659800799220,"last_edited_time":1659800760000,"parent_id":"8c37e887-1d08-4b35-ac72-2c97a034bc78","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"4a117995-d700-4cd6-969a-964f561e9cb2","last_edited_by_table":"notion_user","last_edited_by_id":"4a117995-d700-4cd6-969a-964f561e9cb2","space_id":"d7daae03-6acd-4b45-9e11-170a07bde7fa"}},"5b04ed85-e0a8-472a-9c59-b845fa7cd4cb":{"role":"reader","value":{"id":"5b04ed85-e0a8-472a-9c59-b845fa7cd4cb","version":2,"type":"text","properties":{"title":[["The CI step may fail with this kind of an error -\n"],["FAIL chrome.docker/FETCH_STORIES: 1 request failed to load; file:///var/loki/iframe.html",[["c"]]],[", please refer to this comment for further details - "],["https://github.com/oblador/loki/issues/9#issuecomment-667277448",[["a","https://github.com/oblador/loki/issues/9#issuecomment-667277448"]]]]},"created_time":1659800799220,"last_edited_time":1659800760000,"parent_id":"8c37e887-1d08-4b35-ac72-2c97a034bc78","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"4a117995-d700-4cd6-969a-964f561e9cb2","last_edited_by_table":"notion_user","last_edited_by_id":"4a117995-d700-4cd6-969a-964f561e9cb2","space_id":"d7daae03-6acd-4b45-9e11-170a07bde7fa"}},"ebd45ade-2a25-4894-8961-2e6d04d44955":{"role":"reader","value":{"id":"ebd45ade-2a25-4894-8961-2e6d04d44955","version":2,"type":"text","properties":{"title":[["To fix this, add an option to your config, which will ensure that docker would use the available copy."]]},"created_time":1659800799220,"last_edited_time":1659800760000,"parent_id":"8c37e887-1d08-4b35-ac72-2c97a034bc78","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"4a117995-d700-4cd6-969a-964f561e9cb2","last_edited_by_table":"notion_user","last_edited_by_id":"4a117995-d700-4cd6-969a-964f561e9cb2","space_id":"d7daae03-6acd-4b45-9e11-170a07bde7fa"}},"d64a8c86-7b4a-4761-9e0b-3a535780a034":{"role":"reader","value":{"id":"d64a8c86-7b4a-4761-9e0b-3a535780a034","version":2,"type":"code","properties":{"title":[["{\n  chromeDockerUseCopy: !!process.env.CI\n}\n"]],"language":[["Plain Text"]]},"format":{"code_wrap":true},"created_time":1659800799220,"last_edited_time":1659800760000,"parent_id":"8c37e887-1d08-4b35-ac72-2c97a034bc78","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"4a117995-d700-4cd6-969a-964f561e9cb2","last_edited_by_table":"notion_user","last_edited_by_id":"4a117995-d700-4cd6-969a-964f561e9cb2","space_id":"d7daae03-6acd-4b45-9e11-170a07bde7fa"}},"a9ac2648-989f-4949-ab0c-7cdf896d4e16":{"role":"reader","value":{"id":"a9ac2648-989f-4949-ab0c-7cdf896d4e16","version":2,"type":"sub_header","properties":{"title":[["Tips"]]},"created_time":1659800799220,"last_edited_time":1659800760000,"parent_id":"8c37e887-1d08-4b35-ac72-2c97a034bc78","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"4a117995-d700-4cd6-969a-964f561e9cb2","last_edited_by_table":"notion_user","last_edited_by_id":"4a117995-d700-4cd6-969a-964f561e9cb2","space_id":"d7daae03-6acd-4b45-9e11-170a07bde7fa"}},"501b93a6-7b11-478c-a4b4-2a6855d661c9":{"role":"reader","value":{"id":"501b93a6-7b11-478c-a4b4-2a6855d661c9","version":2,"type":"bulleted_list","properties":{"title":[["Use "],["http/https",[["c"]]],[" protocol to load assets, for example, to load images don't use "],["//www.",[["c"]]],[" format, but use "],["https://www.",[["c"]]],[" format, as the loki runner use file protocol to load the pages and the former one would not resolve in this case."]]},"created_time":1659800799220,"last_edited_time":1659800760000,"parent_id":"8c37e887-1d08-4b35-ac72-2c97a034bc78","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"4a117995-d700-4cd6-969a-964f561e9cb2","last_edited_by_table":"notion_user","last_edited_by_id":"4a117995-d700-4cd6-969a-964f561e9cb2","space_id":"d7daae03-6acd-4b45-9e11-170a07bde7fa"}},"6c9e5c8f-fbb7-4c94-b5fa-372fd56dc72a":{"role":"reader","value":{"id":"6c9e5c8f-fbb7-4c94-b5fa-372fd56dc72a","version":2,"type":"bulleted_list","properties":{"title":[["Try to use as lightweight images/assets as possible, because it will reduce the flakiness of snapshots if during that moment the assets are loading."]]},"created_time":1659800799220,"last_edited_time":1659800760000,"parent_id":"8c37e887-1d08-4b35-ac72-2c97a034bc78","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"4a117995-d700-4cd6-969a-964f561e9cb2","last_edited_by_table":"notion_user","last_edited_by_id":"4a117995-d700-4cd6-969a-964f561e9cb2","space_id":"d7daae03-6acd-4b45-9e11-170a07bde7fa"}},"4d4db212-47a3-4855-a903-c098e3a48835":{"role":"reader","value":{"id":"4d4db212-47a3-4855-a903-c098e3a48835","version":2,"type":"divider","created_time":1659800799220,"last_edited_time":1659800760000,"parent_id":"8c37e887-1d08-4b35-ac72-2c97a034bc78","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"4a117995-d700-4cd6-969a-964f561e9cb2","last_edited_by_table":"notion_user","last_edited_by_id":"4a117995-d700-4cd6-969a-964f561e9cb2","space_id":"d7daae03-6acd-4b45-9e11-170a07bde7fa"}},"7087d21a-e899-411d-a404-9cb9f8f777c9":{"role":"reader","value":{"id":"7087d21a-e899-411d-a404-9cb9f8f777c9","version":2,"type":"text","properties":{"title":[["Refer to this repo - "],["https://github.com/maddhruv/storybook-loki-integration",[["a","https://github.com/maddhruv/storybook-loki-integration"]]],[" and this commit for full integration changes - "],["https://github.com/maddhruv/storybook-loki-integration/commit/e40828148b75c4abb6b02786a7f07204eadaab46",[["a","https://github.com/maddhruv/storybook-loki-integration/commit/e40828148b75c4abb6b02786a7f07204eadaab46"]]]]},"created_time":1659800799220,"last_edited_time":1659800760000,"parent_id":"8c37e887-1d08-4b35-ac72-2c97a034bc78","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"4a117995-d700-4cd6-969a-964f561e9cb2","last_edited_by_table":"notion_user","last_edited_by_id":"4a117995-d700-4cd6-969a-964f561e9cb2","space_id":"d7daae03-6acd-4b45-9e11-170a07bde7fa"}}},"collection":{"68709411-c0b9-4d9c-b995-a3f4cde9837f":{"role":"reader","value":{"id":"68709411-c0b9-4d9c-b995-a3f4cde9837f","version":26,"name":[["maddhruv"]],"schema":{"KU=I":{"name":"published","type":"checkbox"},"egRG":{"name":"description","type":"text"},"rQIr":{"name":"date","type":"date"},"uDKy":{"name":"tags","type":"multi_select","options":[{"id":"dce85699-3a88-41b0-8943-039b2dab4890","color":"gray","value":"CSS"},{"id":"00ec2a4e-91b3-4c28-98af-e610c461da2c","color":"blue","value":"JavaScript"},{"id":"d23c068c-a72b-44ac-903a-334cbe70f0d5","color":"blue","value":"Testing"},{"id":"6f21a8f7-a84d-4b45-b1b9-1a652e9116eb","color":"purple","value":"GitHub"},{"id":"9391dc3d-602a-4abc-9a76-337b31805159","color":"pink","value":"Vercel"}]},"title":{"name":"title","type":"title"}},"format":{"collection_page_properties":[{"visible":true,"property":"uDKy"}]},"parent_id":"75f72675-84b3-4fe1-b177-f0d9457103cd","parent_table":"block","alive":true,"migrated":true,"space_id":"d7daae03-6acd-4b45-9e11-170a07bde7fa"}}},"space":{},"collection_view":{"8747f097-3dd9-4d9e-ab0e-ebb0d9c269db":{"role":"reader","value":{"id":"8747f097-3dd9-4d9e-ab0e-ebb0d9c269db","version":8,"type":"table","format":{"table_wrap":true,"table_properties":[{"width":276,"visible":true,"property":"title"},{"width":200,"visible":true,"property":"uDKy"},{"width":200,"visible":true,"property":"rQIr"},{"width":200,"visible":true,"property":"egRG"},{"visible":true,"property":"KU=I"}],"collection_pointer":{"id":"68709411-c0b9-4d9c-b995-a3f4cde9837f","table":"collection","spaceId":"d7daae03-6acd-4b45-9e11-170a07bde7fa"}},"parent_id":"75f72675-84b3-4fe1-b177-f0d9457103cd","parent_table":"block","alive":true,"page_sort":["8c37e887-1d08-4b35-ac72-2c97a034bc78","b4f68fc1-0371-4a0c-9bdc-492101778879","741c6944-40c0-4fce-9167-36d6cbb5e03d","ab4997c6-cd1b-4a31-b35f-bf71550f21ef","0afbbf7c-ac6b-43d0-b67b-a5e85f8e7260","20853b50-10fd-4571-a547-75bedd111659"],"space_id":"d7daae03-6acd-4b45-9e11-170a07bde7fa"}}},"notion_user":{},"collection_query":{},"signed_urls":{}},"id":"8c37e887-1d08-4b35-ac72-2c97a034bc78","published":true,"description":"Integrate Loki-js with storybook for visual regression testing","date":"2021-05-15","tags":["JavaScript","Testing"],"title":"Storybook Loki Integration"}},"__N_SSG":true},"page":"/blog/[title]","query":{"title":"Storybook-Loki-Integration"},"buildId":"y3IXVlY01SDjNNYdaeJwk","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>